<!DOCTYPE html>
<meta name="robots" content="noindex">
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>JS Bin</title>
  <script src="https://code.jquery.com/jquery-2.1.4.js"></script>
  <script>
  $( document ).ready(function() {
      console.log( "document loaded" );




  });

  $(document).keyup(function(){
      transforme();
  });


function transforme ()
{
  $('#out').val("");
  $( "a" ).remove();
  var lines = $("#in").val().split("\n");
  $.each(lines, function(n, elem) {
              //console.log(elem + " "+ elem.indexOf(" "));
              pos= elem.indexOf(" ");
              res=elem.substr(0,pos)+";"+elem.substr(pos+3,elem.length)+"\n";
              $('#out').val($('#out').val()+res);
            });


CSV=   $('#out').val();
            window.URL = window.webkitURL || window.URL;

            var contentType = 'text/csv';

            var csvFile = new Blob([CSV], {type: contentType});

            var a = document.createElement('a');
            if($('#filename').val()=="")
            {
            a.download = 'my.csv';
          }else{
          a.download = $('#filename').val()+'.csv';
          }

            a.href = window.URL.createObjectURL(csvFile);
            a.textContent = 'Download CSV';

            a.dataset.downloadurl = [contentType, a.download, a.href].join(':');

            document.body.appendChild(a);



}
  </script>
</head>
<body>


Filename:<input id="filename"><br>

<TEXTAREA  id="in" name="username" rows=15 COLS=40>Tapez votre nom ici</TEXTAREA> <P>

<TEXTAREA  id="out" name="username" rows=15 COLS=40>Tapez votre nom ici</TEXTAREA> <P>

</body>
</html>
